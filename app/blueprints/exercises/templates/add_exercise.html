{% extends "base.html" %}
{% from "macros.html" import form_section, input_field, select_field %}

{% block title %}Add Exercise - {{ competition.name }}{% endblock %}

{% block content %}
{% call form_section(
    'Add Exercise',
    submit_label='Create Exercise',
    cancel_url=url_for('exercises.wt_exercises', competition_id=competition.id),
    show_flash=true
) %}
    <p class="text-muted mb-4">{{ competition.name }} ({{ competition.level }})</p>
    
    {{ input_field('name', 'Exercise Name', required=true) }}
    {{ input_field('max_points', 'Max Points', type='number', value='100', min=1) }}
    
    {% set judge_options = [] %}
    {% for user in users %}
        {% if user.role in ['admin', 'organizer', 'judge'] %}
            {% set _ = judge_options.append((user.id, user.username + ' (' + user.role + ')')) %}
        {% endif %}
    {% endfor %}
    {{ select_field('judge_id', 'Judge', judge_options, empty_option='-- No judge --') }}
    
    {% set helper_options = [] %}
    {% for user in users %}
        {% if user.role in ['admin', 'organizer', 'helper'] %}
            {% set _ = helper_options.append((user.id, user.username + ' (' + user.role + ')')) %}
        {% endif %}
    {% endfor %}
    {{ select_field('helper_id', 'Helper', helper_options, empty_option='-- No helper --') }}
{% endcall %}
{% endblock %}
